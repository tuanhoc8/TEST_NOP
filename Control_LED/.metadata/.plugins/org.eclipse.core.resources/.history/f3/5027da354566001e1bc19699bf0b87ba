#include "init.h"

void blinkLed(void)__attribute__((section(".flash_blinkled")));
void blinkLed(void)
{
	for(;;)
	{
		GPIOD->PDOR = (1 << 0) | (1 << 16);
		delay_ms(DELAY);
		GPIOD->PDOR = (1 << 0) | (1 << 15);
		delay_ms(DELAY);
		GPIOD->PDOR = (1 << 15) | (1 << 16);
		delay_ms(DELAY);
	}
}

int main(void)
{
	void (*function_pointer)(void);
	function_pointer = (void (*)(void))0x00002001;

	init_clock();
	init_gpio();
	init_lpit();
	init_lpuart1();

	function_pointer();
}

void my_sprintf(char *buffer, const char *format, ...) {
    va_list args;
    va_start(args, format);
    vsprintf(buffer, format, args);
    va_end(args);
}
